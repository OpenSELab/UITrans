{
    "name": "app/src/main/res/layout/activity_main.xml",
    "content": "<androidx.drawerlayout.widget.DrawerLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n                                        xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n                                        xmlns:tools=\"http://schemas.android.com/tools\"\n                                        android:id=\"@+id/drawer_layout\"\n                                        android:layout_width=\"match_parent\"\n                                        android:layout_height=\"match_parent\"\n                                        android:fitsSystemWindows=\"true\"\n                                        tools:openDrawer=\"start\"\n    >\n\n    <RelativeLayout\n        android:id=\"@+id/fragment_content\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:context=\".MainActivity\">\n    </RelativeLayout>\n\n    <com.google.android.material.navigation.NavigationView\n        android:id=\"@+id/navigation_view\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"match_parent\"\n        android:layout_gravity=\"start\"\n        android:elevation=\"@dimen/z_drawer\"\n        android:fitsSystemWindows=\"true\"\n        app:headerLayout=\"@layout/drawer_header\"\n        app:menu=\"@menu/menu_drawer\"/>\n</androidx.drawerlayout.widget.DrawerLayout>\n\n",
    "java": "package org.bookdash.android.presentation.main;\n\nimport android.content.ActivityNotFoundException;\nimport android.content.Intent;\nimport android.net.Uri;\nimport android.os.Bundle;\nimport android.text.Html;\nimport android.text.method.LinkMovementMethod;\nimport android.view.MenuItem;\nimport android.view.View;\nimport android.widget.TextView;\n\nimport androidx.appcompat.app.ActionBar;\nimport androidx.appcompat.app.AlertDialog;\nimport androidx.appcompat.widget.Toolbar;\nimport androidx.core.view.GravityCompat;\nimport androidx.drawerlayout.widget.DrawerLayout;\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentTransaction;\n\nimport com.google.android.material.navigation.NavigationView;\nimport com.google.android.material.snackbar.Snackbar;\n\nimport org.bookdash.android.BuildConfig;\nimport org.bookdash.android.R;\nimport org.bookdash.android.di.Injection;\nimport org.bookdash.android.presentation.about.AboutFragment;\nimport org.bookdash.android.presentation.activity.BaseAppCompatActivity;\nimport org.bookdash.android.presentation.downloads.DownloadsFragment;\nimport org.bookdash.android.presentation.listbooks.ListBooksFragment;\nimport org.bookdash.android.presentation.settings.SettingsFragment;\n\n\npublic class MainActivity extends BaseAppCompatActivity implements MainContract.MainView, NavDrawerInterface {\n\n    private static final int INVITE_REQUEST_CODE = 1;\n    private static final String TAG = \"MainActivity\";\n    private static final String GOOGLE_PLAY_STORE_URL = \"http://play.google.com/store/apps/details?id=\";\n    private static final String GOOGLE_PLAY_MARKET_URL = \"market://details?id=\";\n    private DrawerLayout drawerLayout;\n    private NavigationView navigationView;\n    private MainContract.MainUserActions mainPresenter;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        drawerLayout = (DrawerLayout) findViewById(R.id.drawer_layout);\n\n        navigationView = (NavigationView) findViewById(R.id.navigation_view);\n\n        mainPresenter = new MainPresenter(this, Injection.provideAnalytics());\n        final ActionBar actionBar = getSupportActionBar();\n\n        if (actionBar != null) {\n            actionBar.setHomeAsUpIndicator(R.drawable.ic_menu_24dp);\n            actionBar.setDisplayHomeAsUpEnabled(true);\n        }\n\n        setUpNavDrawer();\n        showAllBooks();\n    }\n\n    private void setUpNavDrawer() {\n\n        navigationView.setCheckedItem(R.id.action_all_books);\n        navigationView.setNavigationItemSelectedListener(new NavigationView.OnNavigationItemSelectedListener() {\n            @Override\n            public boolean onNavigationItemSelected(MenuItem menuItem) {\n                switch (menuItem.getItemId()) {\n\n                    case R.id.action_all_books: {\n                        mainPresenter.clickViewAllBooks();\n                        break;\n                    }\n                    case R.id.action_downloads:\n                        mainPresenter.clickViewDownloadBooks();\n                        break;\n                    case R.id.action_about:\n                        showAboutPage();\n                        break;\n                    case R.id.action_settings: {\n                        mainPresenter.clickShowSettings();\n                        break;\n                    }\n                    case R.id.action_thanks: {\n                        showThanksPopover();\n                        break;\n                    }\n                    case R.id.action_invite_friends: {\n                        mainPresenter.clickInvitePage();\n                        break;\n                    }\n                    case R.id.action_rate_app: {\n                        mainPresenter.clickRateApp();\n                        break;\n                    }\n                    default:\n\n                }\n                drawerLayout.closeDrawers();\n                if (menuItem.getItemId() == R.id.action_thanks || menuItem\n                        .getItemId() == R.id.action_invite_friends || menuItem.getItemId() == R.id.action_rate_app) {\n                    return false;\n                } else {\n                    return true;\n                }\n\n            }\n\n\n        });\n    }\n\n    private void showAllBooks() {\n        mainPresenter.clickViewAllBooks();\n    }\n\n    public void showSettingsScreen() {\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction ft = fragmentManager.beginTransaction();\n        Fragment settingsFragment = new SettingsFragment();\n        ft.replace(R.id.fragment_content, settingsFragment, \"SETTINGS\");\n        ft.commit();\n    }\n\n    @Override\n    public void showThanksPopover() {\n        AlertDialog.Builder thanksDialog = new AlertDialog.Builder(this);\n        thanksDialog.setTitle(getString(R.string.contributions_to_app));\n        thanksDialog.setMessage(Html.fromHtml(getString(R.string.list_of_contributors)));\n\n        thanksDialog.setPositiveButton(android.R.string.ok, null);\n        AlertDialog ad = thanksDialog.show();\n        ((TextView) ad.findViewById(android.R.id.message)).setMovementMethod(LinkMovementMethod.getInstance());\n\n    }\n\n    @Override\n    public void showAboutPage() {\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction ft = fragmentManager.beginTransaction();\n        Fragment f = AboutFragment.newInstance();\n        ft.replace(R.id.fragment_content, f, \"ABOUT\");\n        ft.commit();\n    }\n\n    @Override\n    public void showRatingPlayStore() {\n        Uri uri = Uri.parse(GOOGLE_PLAY_MARKET_URL + BuildConfig.APPLICATION_ID);\n        Intent goToMarket = new Intent(Intent.ACTION_VIEW, uri);\n        goToMarket.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY | Intent.FLAG_ACTIVITY_MULTIPLE_TASK);\n        try {\n            startActivity(goToMarket);\n        } catch (ActivityNotFoundException e) {\n            try {\n                startActivity(\n                        new Intent(Intent.ACTION_VIEW, Uri.parse(GOOGLE_PLAY_STORE_URL + BuildConfig.APPLICATION_ID)));\n            } catch (ActivityNotFoundException anfe) {\n                Snackbar.make(navigationView, R.string.error_opening_app_rating, Snackbar.LENGTH_LONG);\n            }\n        }\n    }\n\n    @Override\n    public void showAllBooksPage() {\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction ft = fragmentManager.beginTransaction();\n        Fragment f = ListBooksFragment.newInstance();\n        ft.replace(R.id.fragment_content, f, \"ALLBOOKS\");\n        ft.commit();\n    }\n\n    @Override\n    public void showDownloadedBooksPage() {\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction ft = fragmentManager.beginTransaction();\n        Fragment f = DownloadsFragment.newInstance();\n        ft.replace(R.id.fragment_content, f, \"DOWNLOADED_BOOKS\");\n        ft.commit();\n    }\n\n    @Override\n    public void inviteFriends() {\n        try {\n            Intent sendIntent = new Intent();\n            sendIntent.setAction(Intent.ACTION_SEND);\n            sendIntent.putExtra(Intent.EXTRA_TEXT, getString(R.string.invitation_message));\n            sendIntent.putExtra(Intent.EXTRA_SUBJECT, getString(R.string.invitation_subject));\n            sendIntent.setType(\"text/plain\");\n            startActivity(Intent.createChooser(sendIntent,\n                    getResources().getText(R.string.invite_using)));\n        } catch (ActivityNotFoundException ac) {\n            Snackbar.make(navigationView, R.string.invite_error_no_apps_found, Snackbar.LENGTH_LONG)\n                    .show();\n        }\n    }\n\n    @Override\n    public String getScreenName() {\n        return \"MainActivity\";\n    }\n\n    @Override\n    public void openNavDrawer() {\n        drawerLayout.openDrawer(navigationView);\n    }\n\n    @Override\n    public void closeNavDrawer() {\n        drawerLayout.closeDrawer(navigationView);\n    }\n\n    @Override\n    public void setToolbar(Toolbar toolbar) {\n        setSupportActionBar(toolbar);\n        toolbar.setNavigationOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                drawerLayout.openDrawer(GravityCompat.START);\n            }\n        });\n    }\n}",
    "contains": [
        "app/src/main/res/layout/drawer_header",
        "app/src/main/res/menu/menu_drawer"
    ],
    "mock_data": {},
    "source": "bookdash",
    "time": 21.160404443740845,
    "result": {
        "harmony_component_code": "Column() {\n  RelativeContainer() {\n    // 子组件\n  }\n  .width('100%')\n  .height('100%')\n  NavigationView() {\n    // 子组件\n  }\n  .width('auto')\n  .height('100%')\n  .layoutDirection(LayoutDirection.Start)\n  .elevation(this.zDrawer)\n  .fitSystemWindows(true)\n  .header($r('app.layout.drawer_header'))\n  .menu($r('app.menu.menu_drawer'))\n}"
    },
    "explanation": "1. 使用Column组件作为根布局，模拟DrawerLayout的布局结构。\n2. 在Column中嵌套RelativeContainer，模拟RelativeLayout的布局结构。\n3. 使用NavigationView组件模拟NavigationView的布局结构，并设置其属性以匹配原安卓组件的属性。\n4. 使用.width('auto')和.height('100%')来匹配安卓中的wrap_content和match_parent。\n5. 使用.layoutDirection(LayoutDirection.Start)来匹配安卓中的android:layout_gravity=\"start\"。\n6. 使用.elevation(this.zDrawer)来匹配安卓中的android:elevation=\"@dimen/z_drawer\"。\n7. 使用.fitSystemWindows(true)来匹配安卓中的android:fitsSystemWindows=\"true\"。\n8. 使用.header($r('app.layout.drawer_header'))和.menu($r('app.menu.menu_drawer'))来匹配安卓中的app:headerLayout=\"@layout/drawer_header\"和app:menu=\"@menu/menu_drawer\"。"
}