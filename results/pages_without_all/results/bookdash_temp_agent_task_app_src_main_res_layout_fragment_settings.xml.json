{
    "name": "app/src/main/res/layout/fragment_settings.xml",
    "content": "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:orientation=\"vertical\">\n\n    <com.google.android.material.appbar.AppBarLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\">\n\n        <androidx.appcompat.widget.Toolbar\n            android:id=\"@+id/toolbar\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"?actionBarSize\"\n            android:background=\"?colorPrimary\"\n            android:theme=\"@style/ThemeOverlay.AppCompat.Dark.ActionBar\"\n            app:navigationIcon=\"@drawable/ic_menu_24dp\"\n            app:popupTheme=\"@style/ThemeOverlay.AppCompat.Light\"\n            app:title=\"@string/settings_title\" />\n\n    </com.google.android.material.appbar.AppBarLayout>\n\n\n    <FrameLayout\n        android:id=\"@android:id/list_container\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        tools:targetApi=\"n\" />\n</LinearLayout>",
    "java": "package org.bookdash.android.presentation.settings;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.MenuItem;\nimport android.view.View;\n\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.ActionBar;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.appcompat.widget.Toolbar;\nimport androidx.preference.Preference;\nimport androidx.preference.PreferenceFragmentCompat;\n\nimport org.bookdash.android.R;\nimport org.bookdash.android.data.settings.SettingsApiImpl;\nimport org.bookdash.android.di.Injection;\nimport org.bookdash.android.presentation.main.NavDrawerInterface;\n\nimport java.util.ArrayList;\n\nimport za.co.riggaroo.materialhelptutorial.TutorialItem;\nimport za.co.riggaroo.materialhelptutorial.tutorial.MaterialTutorialActivity;\n\n\npublic class SettingsFragment extends PreferenceFragmentCompat implements SettingsContract.View {\n    public static final String TUTORIAL_DISPLAY_KEY = \"tutorial_display_key\";\n    SettingsPresenter presenter;\n    private NavDrawerInterface navDrawerInterface;\n\n    @Override\n    public void onCreatePreferences(Bundle savedInstanceState, String rootKey) {\n        presenter = new SettingsPresenter(Injection.provideTutorialRepo(getContext()), Injection.provideAnalytics(),\n                Injection.provideSettingsRepo(getContext()));\n        presenter.attachView(this);\n\n        addPreferencesFromResource(R.xml.app_preferences);\n        setupTutorialDisplayPreference();\n        setupNewBookNotificationPreference();\n\n    }\n\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        if (context instanceof NavDrawerInterface) {\n            navDrawerInterface = (NavDrawerInterface) context;\n\n        }\n    }\n\n    @Override\n    public void onDetach() {\n        super.onDetach();\n        navDrawerInterface = null;\n    }\n\n    @Override\n    public boolean onOptionsItemSelected(MenuItem item) {\n        switch (item.getItemId()) {\n\n            case android.R.id.home:\n                if (navDrawerInterface != null) {\n                    navDrawerInterface.openNavDrawer();\n                }\n                return true;\n\n        }\n        return super.onOptionsItemSelected(item);\n    }\n\n\n    @Override\n    public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n\n        Toolbar toolbar =  view.findViewById(R.id.toolbar);\n\n        navDrawerInterface.setToolbar(toolbar);\n\n        final ActionBar actionBar = ((AppCompatActivity) getActivity()).getSupportActionBar();\n\n\n        if (actionBar != null) {\n            actionBar.setDisplayHomeAsUpEnabled(true);\n        }\n    }\n\n    private void setupTutorialDisplayPreference() {\n        Preference tutorialPreferenceItem = findPreference(TUTORIAL_DISPLAY_KEY);\n        tutorialPreferenceItem.setOnPreferenceClickListener(new Preference.OnPreferenceClickListener() {\n            @Override\n            public boolean onPreferenceClick(Preference preference) {\n                presenter.openTutorialScreen();\n                return true;\n            }\n        });\n    }\n\n    private void setupNewBookNotificationPreference() {\n        Preference notificationPreference = findPreference(SettingsApiImpl.PREF_IS_SUBSCRIBED_NEW_BOOK_NOTIFICATIONS);\n        notificationPreference.setOnPreferenceChangeListener(new Preference.OnPreferenceChangeListener() {\n            @Override\n            public boolean onPreferenceChange(final Preference preference, final Object newValue) {\n                presenter.setNewBookNotificationSubscriptionStatus((Boolean) newValue);\n                return true;\n            }\n        });\n    }\n\n    @Override\n    public void showTutorialScreen(ArrayList<TutorialItem> tutorialItems) {\n        Intent mainAct = new Intent(getContext(), MaterialTutorialActivity.class);\n        mainAct.putParcelableArrayListExtra(MaterialTutorialActivity.MATERIAL_TUTORIAL_ARG_TUTORIAL_ITEMS,\n                tutorialItems);\n        startActivity(mainAct);\n    }\n}\n",
    "contains": [
        "app/src/main/res/xml/app_preferences.xml"
    ],
    "mock_data": {},
    "source": "bookdash",
    "time": 20.59566569328308,
    "result": {
        "harmony_component_code": "Column() {\n  AppBar() {\n    Toolbar()\n      .id('toolbar')\n      .width('100%')\n      .height('56vp')\n      .backgroundColor($r('app.color.primary'))\n      .theme($r('app.style.ThemeOverlay.AppCompat.Dark.ActionBar'))\n      .navigationIcon($r('app.media.ic_menu_24dp'))\n      .popupTheme($r('app.style.ThemeOverlay.AppCompat.Light'))\n      .title($r('app.string.settings_title'))\n  }\n  .width('100%')\n  .height('auto')\n\n  Stack() {\n    // 子组件\n  }\n  .id('list_container')\n  .width('100%')\n  .height('100%')\n}\n"
    },
    "explanation": "1. 使用Column组件作为根布局，对应安卓的LinearLayout，并设置其方向为垂直。\n2. 使用AppBar组件对应安卓的AppBarLayout，并设置其宽度为100%，高度自适应。\n3. 使用Toolbar组件对应安卓的Toolbar，并设置其宽度为100%，高度为56vp（对应安卓的?actionBarSize），背景颜色为应用主题色，导航图标和弹出主题使用应用资源。\n4. 使用Stack组件对应安卓的FrameLayout，并设置其id为list_container，宽度为100%，高度为100%。\n5. 所有组件的属性和资源引用均严格按照安卓组件描述进行转译，确保功能和行为一致。"
}